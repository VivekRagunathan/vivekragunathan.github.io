<!DOCTYPE html>
<html>

<head>
    <title>Rainbow</title>
    <meta charset="UTF-8">
    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body {
            padding: 5px 20px;
        }
        
        .rainbows>.row {
            margin-bottom: 20px;
        }
        
        .rainbows .rainbow {
            display: flex;
            flex-direction: row;
            align-items: flex-start | stretch;
            height: 32px;
        }
        
        .rainbows .rainbow>label {
            margin-bottom: 5px;
        }
        
        .rainbows .rainbow>div {
            height: 32px;
            width: 25px;
        }

    </style>
</head>

<body>

    <div class="page-header">
        <h1>Nikolay's Rainbow</h1>
        <p>My amatuer attempts of converting <a href="http://nikolay.rocks" target=__blank>Nikolay</a>'s Ruby code for <a href="http://nikolay.rocks/2015-10-24-waves-rainbows-and-flux" target=__blank>rainbow</a> colors generation wasn't working. So <a href="https://twitter.com/nemshilov/status/658420510556995584" target=__blank>requested</a> him for the JS code. Here it is in <i>full action</i>.</p>
    </div>

    <div class=container>

        <div class="rainbows">
            <div class="row">
                <label>Gray Rainbow :)</label>
                <div class="rainbow gray"></div>
            </div>
            
            <div class="row">
               <label>Colorful Rainbow</label>
                <div class="rainbow color"></div>
            </div>
        </div>

    </div>

    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>

    <script>
        var RB_SIZE = 12;

        function sineToHex(i, size, phase) {
            var sin = Math.sin(Math.PI / size * 2 * i + phase);
            var in255 = Math.floor(sin * 127) + 128;
            var hex = in255.toString(16);
            return hex.length === 1 ? "0" + hex : hex;
        }

        function generateRainbowColors(size, gray) {
            var colors = new Array(size);

            for (var i = 0; i < size; i++) {
                
                var red = sineToHex(i,
                                    size,
                                    (gray ? 0 : 0 * Math.PI * 2 / 3)); // 0   deg
                
                var blue = sineToHex(i,
                                     size,
                                     (gray ? 0 : 1 * Math.PI * 2 / 3)); // 120 deg
                
                var green = sineToHex(i,
                                      size,
                                      (gray ? 0 : 2 * Math.PI * 2 / 3)); // 240 deg


                colors[i] = "#" + red + green + blue;
            }

            return colors;
        }
        
        function displayRainbow(gray, targetSelectorName) {
            var colors = generateRainbowColors(RB_SIZE, gray || false);

            var rbElement = $(targetSelectorName);

            for (var index = 0; index < colors.length; ++index) {
                var color = colors[index];
                $("<div>").css("background-color", color).appendTo(rbElement);
            }
        }
        
        $(function() {
            displayRainbow(true, ".rainbows .rainbow.gray");
            displayRainbow(false, ".rainbows .rainbow.color");
        });

    </script>

</body>

</html>
